var Atlas=angular.module("Atlas",["ui.router","headroom"]);Atlas.config(["$compileProvider",function(t){t.debugInfoEnabled(!1)}]),Atlas.provider("atRouter",["$urlRouterProvider",function(t){var e=function(e){t.otherwise(e)},n=function(){return{}};return{$get:n,defaultRoute:e}}]),Atlas.provider("atBlog",["$stateProvider",function(t){var e={},n=function(t,e,n){return{data:t,prefix:e,postArray:n}};t.state("blog",{"abstract":!0,url:"/blog",views:{"root@":{templateUrl:"vendor/atlas/templates/atBlog.html",controller:["$state","$scope","atBlog",function(t,e,n){e.getPost=function(t,o){n.getPostJson(t,o,function(t){e.atPost=t})},e.getArray=function(t){n.getPostArray(t,function(t){e.blogNav=t})}}]}}});var o=function(o,r,a,s){return e[o]=new n(r,a,s),t.state("blog."+o,{url:"/"+o+"/:postId",views:{"post@blog":{templateUrl:"vendor/atlas/templates/atBlogPost.html",controller:["$state","$scope",function(t,e){e.getPost(o,t.params.postId)}]},"nav@blog":{templateUrl:"vendor/atlas/templates/atBlogNav.html",controller:["$scope",function(t){t.blog=o,t.getArray(o)}]}}}),this},r=["$http",function(t){var n=e,o=function(e,o,a){if(""==o)r(e,function(r){o=r[0].id;var s=n[e];t.get(s.data+"/"+s.prefix+o+".json").success(function(t){a&&a(t)}).error(function(t,e){console.error("atlas failed to retrieve: "+s.prefix+o+".json","\nstatus: "+e)})});else{var s=n[e];t.get(s.data+"/"+s.prefix+o+".json").success(function(t){a&&a(t)}).error(function(t,e){console.error("atlas failed to retrieve: "+s.prefix+o+".json","\nstatus: "+e)})}},r=function(e,o){t.get(n[e].postArray).success(function(t){o&&o(t)})};return{getPostJson:o,getPostArray:r}}];return{$get:r,createBlog:o}}]),Atlas.config(["$stateProvider",function(t){t.state("atlas",{url:"/atlas",views:{"root@":{templateUrl:"vendor/atlas/templates/atlas.html"}}})}]),Atlas.constant("AT_POST_SECTION_TYPE",{text:16,image:32,video:48}),Atlas.factory("FAtPostSection",["AT_POST_SECTION_TYPE",function(t){var e=function(e,n,o){switch(n=n||"",e){case t.text:return{type:"text",content:n};case t.image:return o=o||"",{type:"image",content:n,caption:o};case t.video:return{type:"video",content:n}}};return e}]),Atlas.controller("CPostCreator",["$scope","FAtPostSection","AT_POST_SECTION_TYPE",function(t,e,n){this.thePost={prefix:"",id:"",title:"",subtitle:"",date:"",author:"",sections:[]},this.SECTION_TYPE=n,this.addSection=function(t){this.thePost.sections.push(new e(t))},this.deleteSection=function(t){this.thePost.sections.splice(t,1)},this.dateSetToday=function(){t.atPost.date.$setViewValue(""),this.thePost.date=moment().format("YYYYMMDD")},this.addSection(n.text),this.exportJson=function(){var t=document.createElement("a");t.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.thePost))),t.setAttribute("download",this.thePost.prefix+"Post"+this.thePost.id+".json"),t.click()}}]),Atlas.provider("atPage",["$stateProvider",function(t){var e={},n=function(t){return{data:t}},o=function(o,r){return e[o]=new n(r),t.state(o,{url:"/"+o+"/:sectionId",views:{"root@":{templateUrl:r,controller:["$state","$scope","$uiViewScroll",function(t,e,n){e.$on("$stateChangeSuccess",function(){""==t.params.sectionId?$("body").animate({scrollTop:"0"},64):n($("#"+t.params.sectionId))})}]}}}),this},r=[function(){return{}}];return{$get:r,createPage:o}}]),Atlas.provider("atNav",[function(){var t="",e=[],n=function(e,n){return t={template:e,state:n},this},o=function(t,n){return e.push({name:t,state:n}),this},r=["$http",function(){var n=t,o=e,r=function(){return n},a=function(){return o};return{getBrand:r,getTabs:a}}];return{$get:r,setBrand:n,addTab:o}}]),Atlas.directive("atNavBar",[function(){return{restrict:"A",scope:{},templateUrl:"vendor/atlas/templates/atNavBar.html",controller:["$scope","atNav",function(t,e){t.brand=e.getBrand(),t.tabs=e.getTabs()}]}}]),Atlas.factory("prependChar",[function(){var t=function(e,n,o){return e=""+e,e.length>=o?e:t(n+e,n,o)};return t}]),Atlas.filter("atDate",[function(){var t=function(t,e){if(t=t||"",t=t.trim(),e=e||!1,8==t.length){var n=moment(t,"YYYYMMDD");return n.format("long"==e?"MMMM Do, YYYY":"us"==e?"MM-DD-YYYY":"YYYY-MM-DD")}return"0000-00-00"};return t}]),Atlas.directive("atCountdown",[function(){return{restrict:"A",scope:{end:"@atCountdown",postMessage:"@atCountdownPost",id:"@atCountdownId"},template:'<h1 id="{{id}}">{{time}}<br><small>{{postMessage}}</small></h1>',controller:["$scope","$interval",function(t,e){e(function(){t.time=moment.duration(moment(t.end).valueOf()-moment().valueOf()).format("D  |  hh : mm : ss")},1e3)}]}}]),Atlas.directive("atCarousel",[function(){}]),Atlas.directive("atNavSpacer",function(){return{restrict:"A",scope:{},controller:["$scope","$element",function(t,e){e.height($("#atlasNav").height())}]}}),console.log("%c\n            $$\\     $$\\                      \n            $$ |    $$ |                     \n  $$$$$$\\ $$$$$$\\   $$ | $$$$$$\\   $$$$$$$\\  \n  \\____$$\\\\_$$  _|  $$ | \\____$$\\ $$  _____| \n  $$$$$$$ | $$ |    $$ | $$$$$$$ |\\$$$$$$   \n $$  __$$ | $$ |$$\\ $$ |$$  __$$ | \\____$$\\  \n \\$$$$$$$ | \\$$$$  |$$ |\\$$$$$$$ |$$$$$$$  | \n  \\_______|  \\____/ \\__| \\_______|\\_______/  \n\nKevin Wang: https://github.com/wangkevin1                            \n\n ","font-family: Consolas, Monaco, monospace; color: #bc2200");