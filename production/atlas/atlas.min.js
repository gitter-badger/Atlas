var Atlas=angular.module("Atlas",["ngAnimate","ui.router","ui.utils","ui.bootstrap","headroom"]);Atlas.config(["$compileProvider",function(t){t.debugInfoEnabled(!1)}]),Atlas.provider("atBlog",["$stateProvider",function(t){var e={},n=function(t,e,n){return{data:t,prefix:e,postArray:n}};t.state("blog",{"abstract":!0,url:"/blog",views:{"root@":{templateUrl:"vendor/atlas/templates/atBlog.html",controller:["$state","$scope","atBlog",function(t,e,n){e.getPost=function(t,a){n.getPostJson(t,a,function(t){e.atPost=t})},e.getArray=function(t){n.getPostArray(t,function(t){e.blogNav=t})}}]}}});var a=function(a,r,o,s){return e[a]=new n(r,o,s),t.state("blog."+a,{url:"/"+a+"/:postId",views:{"post@blog":{templateUrl:"vendor/atlas/templates/atBlogPost.html",controller:["$state","$scope",function(t,e){e.getPost(a,t.params.postId)}]},"nav@blog":{templateUrl:"vendor/atlas/templates/atBlogNav.html",controller:["$scope",function(t){t.blog=a,t.getArray(a)}]}}}),this},r=["$http",function(t){var n=e,a=function(e,a,o){if(""==a)r(e,function(r){a=r[0].id;var s=n[e];t.get(s.data+"/"+s.prefix+a+".json").success(function(t){o&&o(t)}).error(function(t,e){console.error("atlas failed to retrieve: "+s.prefix+a+".json","\nstatus: "+e)})});else{var s=n[e];t.get(s.data+"/"+s.prefix+a+".json").success(function(t){o&&o(t)}).error(function(t,e){console.error("atlas failed to retrieve: "+s.prefix+a+".json","\nstatus: "+e)})}},r=function(e,a){t.get(n[e].postArray).success(function(t){a&&a(t)})};return{getPostJson:a,getPostArray:r}}];return{$get:r,createBlog:a}}]),Atlas.config(["$stateProvider",function(t){t.state("atlas",{url:"/atlas",views:{"root@":{templateUrl:"vendor/atlas/templates/atlas.html"}}})}]),Atlas.constant("AT_POST_SECTION_TYPE",{text:16,image:32,video:48}),Atlas.factory("FAtPostSection",["AT_POST_SECTION_TYPE",function(t){var e=function(e,n,a){switch(n=n||"",e){case t.text:return{type:"text",content:n};case t.image:return a=a||"",{type:"image",content:n,caption:a};case t.video:return{type:"video",content:n}}};return e}]),Atlas.controller("CPostCreator",["$scope","FAtPostSection","AT_POST_SECTION_TYPE",function(t,e,n){this.thePost={prefix:"",id:"",title:"",subtitle:"",date:"",author:"",sections:[]},this.SECTION_TYPE=n,this.addSection=function(t){this.thePost.sections.push(new e(t))},this.deleteSection=function(t){this.thePost.sections.splice(t,1)},this.dateSetToday=function(){t.atPost.date.$setViewValue(""),this.thePost.date=moment().format("YYYYMMDD")},this.addSection(n.text),this.exportJson=function(){var t=document.createElement("a");t.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.thePost))),t.setAttribute("download",this.thePost.prefix+"Post"+this.thePost.id+".json"),t.click()}}]),Atlas.provider("atPage",["$stateProvider",function(t){var e={},n=function(t){return{data:t}},a=function(a,r){return e[a]=new n(r),t.state(a,{url:"/"+a+"/:sectionId",views:{"root@":{templateUrl:r,controller:["$state","$scope","$uiViewScroll",function(t,e,n){e.$on("$stateChangeSuccess",function(){""==t.params.sectionId?$("body").animate({scrollTop:"0"},64):n($("#"+t.params.sectionId))})}]}}}),this},r=[function(){return{}}];return{$get:r,createPage:a}}]),Atlas.provider("atNav",[function(){var t="",e=[],n=function(e,n){return t={template:e,state:n},this},a=function(t,n){return e.push({name:t,state:n}),this},r=["$http",function(){var n=t,a=e,r=function(){return n},o=function(){return a};return{getBrand:r,getTabs:o}}];return{$get:r,setBrand:n,addTab:a}}]),Atlas.directive("atNavBar",[function(){return{restrict:"A",scope:{},templateUrl:"vendor/atlas/templates/atNavBar.html",controller:["$scope","atNav",function(t,e){t.brand=e.getBrand(),t.tabs=e.getTabs()}]}}]),Atlas.directive("atNavSpacer",function(){return{restrict:"A",scope:{},controller:["$scope","$element",function(t,e){e.height(e.parent().find("#atnavbar").height())}]}}),Atlas.factory("prependChar",[function(){var t=function(e,n,a){return e=""+e,e.length>=a?e:t(n+e,n,a)};return t}]),Atlas.filter("atDate",[function(){var t=function(t,e){if(t=t||"",t=t.trim(),e=e||!1,8==t.length){var n=moment(t,"YYYYMMDD");return n.format("long"==e?"MMMM Do, YYYY":"us"==e?"MM-DD-YYYY":"YYYY-MM-DD")}return"0000-00-00"};return t}]),Atlas.directive("atCountdown",[function(){return{restrict:"A",scope:{end:"@atCountdown",postMessage:"@atCountdownPost"},template:'<h1 class="atCountdown">{{time}}<br><small>{{postMessage}}</small></h1>',controller:["$scope","$interval",function(t,e){e(function(){t.time=moment.duration(moment(t.end).valueOf()-moment().valueOf()).format("D  |  hh : mm : ss")},1e3)}]}}]),Atlas.directive("atCarousel",[function(){return{restrict:"A",scope:{imageArray:"@atCarousel",interval:"@atInterval"},transclude:!0,templateUrl:"vendor/atlas/templates/atCarousel.html",controller:["$scope","$element","$http","$timeout","$animate",function(t,e,n,a,r){e.addClass("at-carousel"),t.interval=t.interval||0,n.get(t.imageArray).success(function(n){var o=0,s=function(){var i=e.find(".at-slide-current"),l=e.find(".at-slide-latter");i.css("background-image","url("+n[o]+")"),l.css("background-image","url("+n[(o+1)%n.length]+")"),o=(o+1)%n.length,r.addClass(i,"at-slide-slide"),r.addClass(l,"at-slide-slide").then(function(){r.removeClass(i,"at-slide-slide"),r.removeClass(l,"at-slide-slide"),i.removeClass("at-slide-current").addClass("at-slide-latter"),l.removeClass("at-slide-latter").addClass("at-slide-current");a(s,t.interval)})};s()}).error(function(e,n){console.error("atlas failed to retrieve: "+t.imageArray,"\nstatus: "+n)})}]}}]),Atlas.provider("at",["$urlRouterProvider","atBlogProvider","atPageProvider","atNavProvider",function(t,e,n,a){var r=function(e){t.otherwise(e)},o=function(t,n,a,r){return e.createBlog(t,n,a,r),this},s=function(t,e){return n.createPage(t,e),this},i=function(t,e){return a.setBrand(t,e),this},l=function(t,e){return a.addTab(t,e),this},c=function(){return{}};return{$get:c,defaultRoute:r,createBlog:o,createPage:s,setBrand:i,addTab:l}}]),console.log("%c\n            $$\\     $$\\                      \n            $$ |    $$ |                     \n  $$$$$$\\ $$$$$$\\   $$ | $$$$$$\\   $$$$$$$\\  \n  \\____$$\\\\_$$  _|  $$ | \\____$$\\ $$  _____| \n  $$$$$$$ | $$ |    $$ | $$$$$$$ |\\$$$$$$   \n $$  __$$ | $$ |$$\\ $$ |$$  __$$ | \\____$$\\  \n \\$$$$$$$ | \\$$$$  |$$ |\\$$$$$$$ |$$$$$$$  | \n  \\_______|  \\____/ \\__| \\_______|\\_______/  \n\nhttps://github.com/wangkevin1/Atlas                                  \nKevin Wang\n\n ","font-family: Consolas, Monaco, monospace; color: #bc2200");